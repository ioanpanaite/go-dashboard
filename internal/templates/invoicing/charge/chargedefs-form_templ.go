// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.648
package charge_view

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import "context"
import "io"
import "bytes"

import "kub/dashboardES/internal/models"
import "fmt"

type ChargeDefsFormData struct {
	Mode        string
	Company     []models.Company
	CompanyId   string
	ChargedefId string
	Types       []models.ChargeType
	Reftype     string
	IsUser      string
	Refuuid     string
	Refid       string
	InitData    models.ChargeDef
}

func updatePostDataAndURL(initialRefType string) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_updatePostDataAndURL_a3a2`,
		Function: `function __templ_updatePostDataAndURL_a3a2(initialRefType){//get id & uuid from chips
	var uuids = [];
	var ids = [];
	var chipsDiv = null;
	var form = document.getElementById("searchForm-CDF");
	var toggler = document.getElementById("formTypeRadio")

	var reftype = "company"
	if (initialRefType === ""){
		reftype= toggler.value === "company" ? "company" : "user";
	}else{
		reftype = initialRefType;
	}

	if (toggler.value == "company"){
		chipsDiv = document.getElementById("selCompanies");
	}else{
		chipsDiv = document.getElementById("selEmployees")
	}
	chipsDiv.querySelectorAll("sl-tag").forEach((tag) => {
		uuids.push(tag.getAttribute("data-uuid"));
		ids.push(tag.getAttribute("data-id"));
	});
	form.setAttribute("hx-headers",JSON.stringify({"refids":ids,"refuuids":uuids,"reftype":reftype}))
	// 
}`,
		Call:       templ.SafeScript(`__templ_updatePostDataAndURL_a3a2`, initialRefType),
		CallInline: templ.SafeScriptInline(`__templ_updatePostDataAndURL_a3a2`, initialRefType),
	}
}

func ChargedefsForm(data ChargeDefsFormData) templ.Component {
	return templ.ComponentFunc(func(ctx context.Context, templ_7745c5c3_W io.Writer) (templ_7745c5c3_Err error) {
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templ_7745c5c3_W.(*bytes.Buffer)
		if !templ_7745c5c3_IsBuffer {
			templ_7745c5c3_Buffer = templ.GetBuffer()
			defer templ.ReleaseBuffer(templ_7745c5c3_Buffer)
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<script>\r\n\tvar toggler = document.getElementById(\"formTypeRadio\")\r\nif (toggler){\r\n\t\t\tvar selectedCompanyDiv = document.getElementById(\"selCompanies\");\r\n\t\t\tvar searchCompany = document.getElementById(\"searchCompany-CDF\");\r\n\t\t\tvar searchEmployee = document.getElementById(\"searchEmployee-CDF\");\r\n\r\n\r\n\t\t\ttoggler.addEventListener(\"sl-change\", (e) => {\r\n\t\t\t\tif (e.target.value === \"company\") {\r\n\t\t\t\t\tsearchEmployee.classList.add(\"hidden\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (selectedCompanyDiv.hasChildNodes()) {\r\n\t\t\t\t\t\tsearchEmployee.classList.remove(\"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t// Create an observer instance\r\n\t\tvar observer = new MutationObserver(function(mutationsList, observer) {\r\n\t\tif (selectedCompanyDiv.hasChildNodes()) {\r\n\t\t\t\t\tif (toggler.value != \"company\"){\r\n\t\t\t\t\t\tsearchEmployee.classList.remove(\"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsearchEmployee.classList.add(\"hidden\");\r\n\t\t\t\t}\r\n\t\t});\r\n\t\t// Start observing the target node for configured mutations\r\n\t\tobserver.observe(selectedCompanyDiv, { childList: true, subtree: true });\r\n}\r\n//get and set company ids\r\nfunction getAndSetCompantIds(){\r\n\tvar ids = [];\r\n\tselectedCompanyDiv.querySelectorAll(\"sl-tag\").forEach((tag) => {\r\n\t\tids.push(tag.getAttribute(\"data-id\"));\r\n\t});\r\n\tvar employeeInput = document.getElementById(\"inputFilterEmployee1\");\r\n\temployeeInput.setAttribute(\"hx-headers\",JSON.stringify({\"companyids\":ids}))\r\n\tdocument.getElementById(\"searchMenuEmployee1\").open = true;\r\n}\r\n\r\n</script><div class=\"rounded overflow-hidden\"><div class=\"bg-black text-white py-2 px-4\"><h2>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(data.Mode)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 93, Col: 18}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</h2></div><form id=\"searchForm-CDF\" class=\"container space-y-4 columns-1 p-2\" hx-post=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/panels/invoicing/charges/%v/%v?ref-id=%v&ref-uuid=%v&ref-type=%v", data.CompanyId, data.ChargedefId, data.Refid, data.Refuuid, data.Reftype))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 98, Col: 167}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" hx-trigger=\"submit delay:50ms\" hx-swap=\"innerHTML\" hx-target=\"this\" hx-indicator=\".htmx-indicator\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.Refuuid == "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<sl-radio-group id=\"formTypeRadio\" label=\"Select an option\" name=\"chargedefTypeRadio\" value=\"company\" size=\"small\"><sl-radio-button data-target-id=\"searchCompany-CDF\" value=\"company\">Company</sl-radio-button> <sl-radio-button data-target-id=\"searchEmployee-CDF\" value=\"employee\">Employee</sl-radio-button></sl-radio-group><div id=\"searchCompany-CDF\"><label for=\"searchCompany\">Company:</label><div class=\"-mt-4\"><sl-dropdown hoist id=\"searchCompanyForm\"><div class=\"h-10\"></div><sl-menu id=\"menuItems\" class=\"menuItems overflow-y-scroll \" style=\" width: 500px; height: 250px;\"><div class=\"flex flex-col items-center justify-center gap-3 w-full h-full\"><p>Type to search...\r</p><div class=\"flex justify-center gap-2 items-center\"><sl-spinner style=\"font-size: 1rem; --indicator-color: black;\"></sl-spinner><p>Loading initial list...\r</p></div></div></sl-menu></sl-dropdown> <sl-input slot=\"trigger\" id=\"inputFilterForm\" name=\"search\" size=\"small\" autocomplete=\"off\" onclick=\"document.getElementById(&#39;searchCompanyForm&#39;).open = true;\" placeholder=\"Search Company...\" hx-get=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/panels/companies/search?module=%v&page=%v&values=%v", "invoicing", "charges", "uuid"))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 146, Col: 115}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" hx-target=\"previous .menuItems\" hx-swap=\"innerHTML\" hx-headers=\"\" hx-trigger=\"click, keyup delay:1000ms\" hx-indicator=\".htmx-indicator\"></sl-input><div id=\"selCompanies\" class=\"chipsholder block flex-wrap\"></div></div><input type=\"hidden\" id=\"companyIdsInput\" name=\"companyIds\"></div><div id=\"searchEmployee-CDF\" class=\"hidden\"><label for=\"searchEmployee1\">Employee:</label><div class=\"-mt-4\"></div><sl-dropdown hoist id=\"searchMenuEmployee1\"><div class=\"h-10\"></div><sl-menu id=\"menuItems\" class=\"menuItems overflow-y-scroll\" style=\" width: 500px; height: 250px;\"><div class=\"flex flex-col items-center justify-center gap-3 w-full h-full\"><p>Type to search...\r</p><div class=\"flex justify-center gap-2 items-center\"><sl-spinner style=\"font-size: 1rem; --indicator-color: black;\"></sl-spinner><p>Loading initial list...\r</p></div></div></sl-menu></sl-dropdown> <sl-input slot=\"trigger\" id=\"inputFilterEmployee1\" name=\"search\" size=\"small\" autocomplete=\"off\" placeholder=\"Search Employee...\" hx-get=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 string
			templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("/panels/employee/search?module=%v&page=%v&values=%v&fast=%v", "invoicing", "charges", "uuid", "true"))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 187, Col: 129}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\" hx-target=\"previous .menuItems\" hx-swap=\"innerHTML\" onclick=\"getAndSetCompantIds();\" hx-trigger=\"click delay:500ms, keyup delay:1000ms\" hx-indicator=\".htmx-indicator\"></sl-input><div id=\"selEmployees\" class=\"chipsholder block flex-wrap\"></div><input type=\"hidden\" id=\"employeesIdsInput\" name=\"employeeIds\"></div><script>\r\n\t\t\t\t//init if company & employee dropdown available\r\n\t\t\t\t// from element\r\n\t\t\t\tinitializeDropdown(\"searchCompany-CDF\");\r\n\t\t\t\tinitializeDropdown(\"searchEmployee-CDF\");\r\n\t\t\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<div class=\"\"><label class=\"block text-sm font-medium text-gray-700\" for=\"name\">Name *</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"text\" id=\"name\" name=\"name\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 string
			templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(data.InitData.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 212, Col: 32}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" required></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"type\">Type *</label> <select class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" id=\"type\" name=\"type\" required><option value>Select Type</option><!-- Add options here -->")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, item := range data.Types {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<option value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 string
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", item.Id))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 229, Col: 41}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.InitData.Name != "" {
				if data.InitData.TypeId == item.Id {
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" selected")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(item.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 236, Col: 18}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</option>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</select></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"concept\">Concept</label> <textarea class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" id=\"concept\" name=\"concept\" rows=\"3\" placeholder=\"Add more information about this fee\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Concept != "" {
			var templ_7745c5c3_Var9 string
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(data.InitData.Concept)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 251, Col: 29}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</textarea></div><div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\"><div><label class=\"block text-sm font-medium text-gray-700\" for=\"totalAmount\">Total Amount</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"number\" id=\"totalAmount\" name=\"totalAmount\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var10 string
			templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%.2f", data.InitData.Amount))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 267, Col: 56}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" step=\"0.01\" min=\"0\"></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"monthlyAmount\">Montly Amount</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"number\" id=\"monthlyAmount\" name=\"monthlyAmount\" step=\"0.01\" min=\"0\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var11 string
			templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%.2f", data.InitData.Monthly))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 287, Col: 57}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"months\">Months *</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"number\" id=\"months\" name=\"months\" min=\"0\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var12 string
			templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.InitData.Months))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 300, Col: 54}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" required></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"prepayAmount\">Prepay Amount *</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"number\" id=\"prepayAmount\" name=\"prepayAmount\" step=\"0.01\" min=\"0\" required")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var13 string
			templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%.2f", data.InitData.Prepay))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 319, Col: 56}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("></div></div><div class=\"grid grid-cols-1 gap-4 sm:grid-cols-3\"><div><label class=\"block text-sm font-medium text-gray-700\" for=\"contractStart\">Contract Start *</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"date\" id=\"contractStart\" name=\"contractStart\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var14 string
			templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinStringErrs(data.InitData.DateStart)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 336, Col: 38}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" required></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"monthsLack\">Months Lack</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"number\" id=\"monthsLack\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var15 string
			templ_7745c5c3_Var15, templ_7745c5c3_Err = templ.JoinStringErrs(data.InitData.Lack)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 351, Col: 33}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var15))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"0\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" min=\"0\" name=\"monthsLack\"></div><div><label class=\"block text-sm font-medium text-gray-700\" for=\"contractEnd\">Contract End</label> <input class=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\" type=\"date\" id=\"contractEnd\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var16 string
			templ_7745c5c3_Var16, templ_7745c5c3_Err = templ.JoinStringErrs(data.InitData.DateEnd)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/templates/invoicing/charge/chargedefs-form.templ`, Line: 369, Col: 36}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var16))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" name=\"contractEnd\"></div></div><div class=\"flex items-start\"><div class=\"flex items-center h-5\"><input class=\"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded\" type=\"checkbox\" id=\"autoRenew\" name=\"autoRenew\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			if data.InitData.Renew {
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" checked")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("></div><div class=\"ml-3 text-sm\"><label class=\"font-medium text-gray-700\" for=\"autoRenew\">Automatically renew at finish</label></div></div><div class=\"flex p-2\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, updatePostDataAndURL(data.Reftype))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<sl-button id=\"submitBtn\" type=\"submit\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.Refuuid == "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(" onclick=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var17 templ.ComponentScript = updatePostDataAndURL(data.Reftype)
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var17.Call)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if data.InitData.Name != "" {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("Update\r")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("Submit\r")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</sl-button><div class=\"grow\"></div><sl-button id=\"close-from\" type=\"reset\">Clear</sl-button></div></form></div><script>\r\n\r\n\tfunction showLoading(){\r\n\t\tdocument.getElementById(\"submitBtn\").setAttribute(\"disabled\", \"true\");\r\n\t\tdocument.getElementById(\"submitBtn\").innerHTML = `\r\n\t\t\t<sl-spinner style=\"font-size: 1rem; --indicator-color: black;\"></sl-spinner>\r\n\t\t`;\r\n\t}\r\n\r\n\t// document.getElementById(\"searchForm-CDF\").addEventListener('htmx:beforeRequest', function(event) {\r\n\t// \tvar form = event.target;\r\n\t// \tevent.preventDefault(); // This should stop the HTMX request if validation fails\r\n\t// });\r\n\r\n\r\n    function checkFormValidity() {\r\n\r\n\t\tconst totalAmount = document.getElementById(\"totalAmount\");\r\n\t\tconst monthlyAmount = document.getElementById(\"monthlyAmount\");\r\n\t\tconst companyIdsInput = document.getElementById(\"companyIdsInput\");\r\n\t\tconst inputFilterForm = document.getElementById(\"inputFilterForm\");\r\n\t\t\r\n\r\n\t\tconsole.log(\"checking from validity...\");\r\n\r\n        // Reset custom validity messages to ensure fresh validation\r\n        totalAmount.setCustomValidity(\"\");\r\n        monthlyAmount.setCustomValidity(\"\");\r\n        inputFilterForm.setCustomValidity(\"\");\r\n\r\n        // Check if at least one of totalAmount or monthlyAmount is filled\r\n        if (totalAmount.value === '' && monthlyAmount.value === '') {\r\n            totalAmount.setCustomValidity(\"Either Total Amount or Monthly Amount must be filled.\");\r\n            monthlyAmount.setCustomValidity(\"Either Total Amount or Monthly Amount must be filled.\");\r\n\t\t\tconsole.log(\"Either Total Amount or Monthly Amount must be filled.\");\r\n        } \r\n\r\n        // Check if companyIdsInput is not empty\r\n        if (companyIdsInput.value === '') {\r\n            // Since companyIdsInput is a hidden field, setting its custom validity won't directly show a message to the user.\r\n            // You may need to display a message elsewhere in your form or UI.\r\n            inputFilterForm.setCustomValidity(\"A company must be selected.\");\r\n\t\t\tconsole.log(\"A company must be selected.\");\r\n        }\r\n    }\r\n\r\n\r\n    // Remember to clear the custom validity when the user corrects the input\r\n    document.getElementById(\"totalAmount\").addEventListener(\"input\", checkFormValidity);\r\n    document.getElementById(\"monthlyAmount\").addEventListener(\"input\", checkFormValidity);\r\n\tdocument.getElementById(\"companyIdsInput\").addEventListener(\"input\", checkFormValidity);\r\n\tdocument.getElementById(\"searchCompanyForm\").addEventListener(\"sl-after-hide\", checkFormValidity);\r\n\tcheckFormValidity();\r\n\r\n\tdocument.getElementById(\"searchForm-CDF\").addEventListener('submit', function(event) {\r\n\r\n\r\n\t\t// If the form is valid, show a spinner and submit the form\r\n\t\tshowLoading();\r\n\t\t// Run 20ms after submission\r\n\t\tsetTimeout(function() {\r\n\t\tdocument.getElementById(\"Refresh-charges\").click();\r\n\t\tdocument.getElementById(\"Refresh-Employee-charges\").click();\r\n\t\t},200);\r\n\r\n\t});\r\n\r\n  \t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if !templ_7745c5c3_IsBuffer {
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteTo(templ_7745c5c3_W)
		}
		return templ_7745c5c3_Err
	})
}
